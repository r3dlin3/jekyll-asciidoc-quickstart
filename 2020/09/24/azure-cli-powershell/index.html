<!DOCTYPE html>
<html class="no-js">
  <head>
	<meta charset="utf-8">
	<title>Transformer des commandes Bash Azure CLI pour PowerShell | A bit of everything</title>
	<meta name="description" content="La plupart des exemples pour Azure CLI sont données pour Bash. Voyons comment transformer les commandes Bash pour être exécutées sous PowerShell.">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<!-- CSS -->
	<link rel="stylesheet" href="/assets/css/main.css">

	<!--Favicon-->
	<link rel="shortcut icon" href="/assets/favicon.ico" type="image/x-icon">

	<!-- Canonical -->
	<link rel="canonical" href="/2020/09/24/azure-cli-powershell/">

	<!-- RSS -->
	<link type="application/atom+xml" rel="alternate" href="https://r3dlin3.github.io/feed.xml" title="A bit of everything" />
	<!-- SEO -->
	<!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Transformer des commandes Bash Azure CLI pour PowerShell | A bit of everything</title>
<meta name="generator" content="Jekyll v3.8.7" />
<meta property="og:title" content="Transformer des commandes Bash Azure CLI pour PowerShell" />
<meta name="author" content="r3dLiN3" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="La plupart des exemples pour Azure CLI sont données pour Bash. Voyons comment transformer les commandes Bash pour être exécutées sous PowerShell." />
<meta property="og:description" content="La plupart des exemples pour Azure CLI sont données pour Bash. Voyons comment transformer les commandes Bash pour être exécutées sous PowerShell." />
<link rel="canonical" href="https://r3dlin3.github.io/2020/09/24/azure-cli-powershell/" />
<meta property="og:url" content="https://r3dlin3.github.io/2020/09/24/azure-cli-powershell/" />
<meta property="og:site_name" content="A bit of everything" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-09-24T00:00:00+00:00" />
<script type="application/ld+json">
{"author":{"@type":"Person","name":"r3dLiN3"},"headline":"Transformer des commandes Bash Azure CLI pour PowerShell","dateModified":"2020-09-24T00:00:00+00:00","datePublished":"2020-09-24T00:00:00+00:00","description":"La plupart des exemples pour Azure CLI sont données pour Bash. Voyons comment transformer les commandes Bash pour être exécutées sous PowerShell.","mainEntityOfPage":{"@type":"WebPage","@id":"https://r3dlin3.github.io/2020/09/24/azure-cli-powershell/"},"@type":"BlogPosting","url":"https://r3dlin3.github.io/2020/09/24/azure-cli-powershell/","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


	<!-- Font Awesome -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

	<!-- Google Fonts -->
	
	<link href="//fonts.googleapis.com/css?family=Source+Sans+Pro:400,700,700italic,400italic" rel="stylesheet" type="text/css">
	

	<!-- KaTeX -->
	

	<!-- Google Analytics -->
	
</head>

  <body>
    <header class="site-header">
	<div class="branding">
		
		<a href="/">
			<img class="avatar" src="/assets/img/avatar.png" alt="avatar"/>
		</a>
		
		<h1 class="site-title">
			<a href="/">A bit of everything</a>
		</h1>
	</div>
	<nav class="site-nav">
		<ul>
			
			
			
			
			<li>
				<a class="page-link" href="/about/">
					A propos
				</a>
			</li>
			
			
			
			
			
			
			
			
			
			
			
			<li>
				<a class="page-link" href="/tags/">
					tags
				</a>
			</li>
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			<!-- Social icons from Font Awesome, if enabled  -->
			
			
            
            <!-- Search bar -->
            
		</ul>
	</nav>
    
</header>

    <div class="content">
      <article >
  <header style="background-image: url('/')">
    <h1 class="title">Transformer des commandes Bash Azure CLI pour PowerShell</h1>
    
    <p class="meta">
      



24

septembre
  
2020
      
    </p>
  </header>
  <section class="post-content"><div class="sect1">
<h2 id="introduction"><a class="anchor" href="#introduction"></a><a class="link" href="#introduction">Introduction</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>La plupart des exemples pour Azure CLI sont données pour Bash.
Pour autant, on peut être sous Windows, sans <a href="https://docs.microsoft.com/fr-fr/windows/wsl/">sous-système Linux</a>.
On aura cependant toujours PowerShell&nbsp;!</p>
</div>
<div class="paragraph">
<p>Voyons comment transformer les commandes Bash pour être exécutées sous PowerShell.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="les_variables"><a class="anchor" href="#les_variables"></a><a class="link" href="#les_variables">Les variables</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Les variables s&#8217;utilisent de la même façon grâce au symbole <code>$</code>.
Ainsi la commande suivante s&#8217;exécute sous Bash ou PowerShell&nbsp;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="nb">echo</span> <span class="nv">$mavariable</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>echo</code> est un alias pour <code>Write-Output</code> en PowerShell.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Par contre, la déclaration est bien différente&nbsp;:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Bash</th>
<th class="tableblock halign-left valign-top">PowerShell</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mavariable=toto</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$mavariable="toto"</code></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="passage_à_la_ligne"><a class="anchor" href="#passage_à_la_ligne"></a><a class="link" href="#passage_à_la_ligne">Passage à la ligne</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Pour des raisons lisibilités évidentes, les longues commandes Bash sont le plus souvent découpées pour passer à la ligne.
Le caractère <code>\</code> suivi d&#8217;une nouvelle ligne est compris comme <a href="https://pubs.opengroup.org/onlinepubs/9699919799/utilities/V3_chap02.html#tag_18_02_01">une continuation de ligne</a>.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Bash</th>
<th class="tableblock halign-left valign-top">PowerShell</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre>az storage account create \
        --name $sa \
        -g $rg \
        --access-tier Hot \
        --sku Standard_LRS</pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre>az storage account create `
        --name $sa `
        -g $rg `
        --access-tier Hot `
        --sku Standard_LRS</pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="récupération_de_la_sortie_dune_commande"><a class="anchor" href="#récupération_de_la_sortie_dune_commande"></a><a class="link" href="#récupération_de_la_sortie_dune_commande">Récupération de la sortie d&#8217;une commande</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>En mettant simplement entre  <code>`</code>, il est possible de récupérer le résultat d&#8217;une commande pour la mettre dans une variable.
Finalement, ce n&#8217;est pas si compliqué en PowerShell.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Bash</th>
<th class="tableblock halign-left valign-top">PowerShell</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre>streaming_endpoint_hostname=`az ams streaming-endpoint show -g $rg -a $ams -n default`</pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre>$streaming_endpoint_hostname = az ams streaming-endpoint show -g $rg -a $ams -n default</pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="conclusion"><a class="anchor" href="#conclusion"></a><a class="link" href="#conclusion">Conclusion</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Voici quelques exemples pour adapter les commandes sur PowerShell.
Il resterait beaucoup à dire&nbsp;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Gestion des erreurs</p>
</li>
<li>
<p>Transformation en objet PowerShell (ex: <code>az aks list | ConvertFrom-Json</code>)</p>
</li>
<li>
<p>Conversion de fonction plus avancées comme&nbsp;:</p>
<div class="ulist">
<ul>
<li>
<p>Les boucles</p>
</li>
<li>
<p>Les pipes</p>
</li>
<li>
<p>L&#8217;utilisation de fonction spécifiques non présentes par défaut comme <code>jq</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>Etc.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Je mettrai à jour cette page en fonction des cas que je rencontre.</p>
</div>
</div>
</div></section>
  
<footer>
  <div class="tags">
    
    <a class="tag" href="/tags#azure">#azure</a>
    
    <a class="tag" href="/tags#az-cli">#az-cli</a>
    
    <a class="tag" href="/tags#powershell">#powershell</a>
    
  </div>
</footer>


</article>

<!-- Disqus -->


<!-- Post navigation -->

  <div id="post-nav">
  
  <div id="previous-post" class="post-nav-post">
      <p>Article précédent</p>
      <a href="/2020/09/23/lab-data-factory/">
        Préparer rapidement un lab Data Factory en Azure CLI
      </a>
  </div>
  
  
  <div id="next-post" class="post-nav-post">
      <p>Article suivant</p>
      <a href="/2020/12/21/php-app-service/">
        PHP sur Azure App Service : Windows ou Linux ?
      </a>
  </div>
  
</div>



    </div>
    


<footer class="site-footer">
	<nav class="site-nav">
		<ul>
			
<li>
	<a href="/feed.xml" title="Suivre sur RSS">
		<i class="fa fa-fw fa-rss"></i>
	</a>
</li>















<li>
	<a href="https://github.com/r3dlin3" title="Follow on GitHub">
		<i class="fa fa-fw fa-github"></i>
	</a>
</li>




























		</ul>
	</nav>
	<p class="text">Powered by <a href="https://jekyllrb.com/">Jekyll</a> with <i class="fa fa-heart" aria-hidden="true" style="color:Tomato"></i>
</p>
</footer>

  </body>
</html>
